
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>10. Input and output of data from python programmes. &#8212; Computing Lab</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PHYS10008 - extended assignment" href="Boltzmann-description.html" />
    <link rel="prev" title="9. Introduction to the Numpy library." href="9_theNumpyLibrary.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Computing Lab</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../landing-page.html">
                    ComputingLab
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1_IntroToNotebooks.html">
   1. An Introduction to Python and Jupyter notebooks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2_variables_and_methods.html">
   2. Python - Variables, objects and methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3_functions_and_loops.html">
   3 Functions and loops with numerical integration as an example
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5_numerical_differentiation.html">
   5 Numerical differentiation  and rounding errors.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5_numerical_differentiation-original.html">
   5 Numerical differentiation  and rounding errors.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6_branching.html">
   6 Controlling programme execution - the ‘if’ statement
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="7_while_loops.html">
   7 ‘while’ statements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="8_Random_numbers.html">
   8 Random numbers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="9_theNumpyLibrary.html">
   9. Introduction to the Numpy library.
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   10. Input and output of data from python programmes.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Boltzmann-description.html">
   PHYS10008 - extended assignment
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/notebooks/10_inputoutput.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/notebooks/10_inputoutput.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#entering-data-in-response-to-a-prompt-the-input-statement">
   10.1 Entering data in response to a prompt - the input statement.
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#output-simple-data-to-a-file-from-your-programme">
   10.2 Output simple data to a file from your programme.
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#saving-data-as-text-files">
     10.2.1 Saving data as text files.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#saving-data-as-archive-binary-files">
     10.2.2 Saving data as archive (binary) files.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#input-data-from-a-file-into-your-programme">
   10.3 Input data from a file into your programme.
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loading-data-stored-as-text">
     10.3.1 loading data stored as text.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loading-data-stored-using-the-numpy-save-function">
     10.3.2 loading data stored using the Numpy
     <em>
      save
     </em>
     function
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-data-stored-using-the-numpy-savez-function">
     10.3.3 load data stored using the Numpy
     <em>
      savez
     </em>
     function.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#opening-reading-writing-and-closing-more-general-text-files">
   10.4 Opening, reading, writing and closing more general text files.
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#writing-arbitrary-data-to-a-file">
     10.4.1 Writing arbitrary data to a file.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reading-data-from-an-arbitary-text-file">
     10.4.2 Reading data from an arbitary text file.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   10.5 Summary
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>10. Input and output of data from python programmes.</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#entering-data-in-response-to-a-prompt-the-input-statement">
   10.1 Entering data in response to a prompt - the input statement.
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#output-simple-data-to-a-file-from-your-programme">
   10.2 Output simple data to a file from your programme.
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#saving-data-as-text-files">
     10.2.1 Saving data as text files.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#saving-data-as-archive-binary-files">
     10.2.2 Saving data as archive (binary) files.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#input-data-from-a-file-into-your-programme">
   10.3 Input data from a file into your programme.
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loading-data-stored-as-text">
     10.3.1 loading data stored as text.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loading-data-stored-using-the-numpy-save-function">
     10.3.2 loading data stored using the Numpy
     <em>
      save
     </em>
     function
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-data-stored-using-the-numpy-savez-function">
     10.3.3 load data stored using the Numpy
     <em>
      savez
     </em>
     function.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#opening-reading-writing-and-closing-more-general-text-files">
   10.4 Opening, reading, writing and closing more general text files.
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#writing-arbitrary-data-to-a-file">
     10.4.1 Writing arbitrary data to a file.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reading-data-from-an-arbitary-text-file">
     10.4.2 Reading data from an arbitary text file.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   10.5 Summary
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="input-and-output-of-data-from-python-programmes">
<h1>10. Input and output of data from python programmes.<a class="headerlink" href="#input-and-output-of-data-from-python-programmes" title="Permalink to this headline">#</a></h1>
<p>In the Jupyter notebooks you have used so far we have have written our ‘input’ data directly into the python code as variables. We have also restricted the output of the data from the programme directly to the screen by using the ‘print’ statement or graphically using the MathPlotLib library. In practise, we often need to import data to our programme from an externally stored computer file. For example, we may have collected data from an experiment in a datafile that we now wish to process. Similarly, and especially for programmes that take a long time to execute, we want to save data to computer files (so we don’t need to keep running the programme) or so that it can be processed later using further python programmes or other applications (e.g. Excel, Origin etc.).</p>
<p>In this notebook you will learn how to:</p>
<ul class="simple">
<li><p>provide a prompt for a user to enter data into your programme,</p></li>
<li><p>read and write data to and from structured data text files using the Numpy library,</p></li>
<li><p>read and write data to and from structured binary (archive) format files using the Numpy library,</p></li>
<li><p>read and write arbitrary data to a text file as strings.</p></li>
</ul>
<section id="entering-data-in-response-to-a-prompt-the-input-statement">
<h2>10.1 Entering data in response to a prompt - the input statement.<a class="headerlink" href="#entering-data-in-response-to-a-prompt-the-input-statement" title="Permalink to this headline">#</a></h2>
<p>When writing programmes we often need to run the same programe using different input values. So far, in the jupyter notebooks we have achieved this by reassigning values to variables (normally at the beginning of the programme). This is not ideal, especially if you are writing the programme for someone else to run. To avoid this editing of code it is better to prompt the user for input and wait for them to type a response. To do this we use the python <em>input</em> statement. For example,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">=</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter a number:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">StdinNotImplementedError</span><span class="g g-Whitespace">                  </span>Traceback (most recent call last)
<span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">folders</span><span class="o">/</span><span class="n">lt</span><span class="o">/</span><span class="n">p1n6bb0j4_173x9548b473jh0000gn</span><span class="o">/</span><span class="n">T</span><span class="o">/</span><span class="n">ipykernel_15298</span><span class="o">/</span><span class="mf">1391861167.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">a</span><span class="o">=</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter a number:&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="nn">~/.pyenv/versions/3.8.11/lib/python3.8/site-packages/ipykernel/kernelbase.py</span> in <span class="ni">raw_input</span><span class="nt">(self, prompt)</span>
<span class="g g-Whitespace">   </span><span class="mi">1001</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1002</span><span class="s2">         if not self._allow_stdin:</span>
<span class="ne">-&gt; </span><span class="mi">1003</span><span class="s2">             raise StdinNotImplementedError(</span>
<span class="g g-Whitespace">   </span><span class="mi">1004</span><span class="s2">                 &quot;raw_input was called, but this frontend does not support input requests.&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1005</span><span class="s2">             )</span>

<span class="ne">StdinNotImplementedError</span>: raw_input was called, but this frontend does not support input requests.
</pre></div>
</div>
</div>
</div>
<p>A common problem is that the data entered is not of the type expected. For example, in the code above there is nothing to say that the user cannot enter a text string rather than a number. This might cause the programme to fail with an error, or worse, it may do an unexpected type conversion and not produce the correct results.</p>
<p>To avoid these problems it is common to try and ‘trap’ errors with the input and ask the user to try again. To do this you need to check for any exceptions on the data input. In the example below, we are trying to read an integer number <em>b</em>. Provided the assignment of <em>b</em> does not cause an error, there is no exception and the programme moves on to the code following the <em>while</em> statement. However by using the <em>try</em> … <em>except</em> statement we can check to see if the user has indeed entered an integer number. If the input line produces an error, for example the user entered a text string or a floating point number, then the programme will ask again until the correct type of input value is used.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">test</span><span class="o">=</span><span class="kc">True</span>
<span class="k">while</span> <span class="n">test</span> <span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">b</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter an integer number&quot;</span><span class="p">))</span>
        <span class="n">test</span><span class="o">=</span><span class="kc">False</span>
    <span class="k">except</span> <span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;you need to enter a integer number!&quot;</span><span class="p">)</span>
        <span class="n">test</span> <span class="o">=</span><span class="kc">True</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You entered  &quot;</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
    
</pre></div>
</div>
</div>
</div>
<p>In the example above, the programme will ask to re-input the data, whatever caused the error. If you wish you can check to see if a specific error (or errors) has (or have) been produced. If done carefully, this allows you to produce more useful advice for the user depending on the error produced. For example, in the code below we specifically check to see if the error produced was a <em>ValueError</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">test</span><span class="o">=</span><span class="kc">True</span>
<span class="k">while</span> <span class="n">test</span> <span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">c</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter an integer number&quot;</span><span class="p">))</span>
        <span class="n">test</span><span class="o">=</span><span class="kc">False</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;you need to enter a integer number!&quot;</span><span class="p">)</span>
        <span class="n">test</span> <span class="o">=</span><span class="kc">True</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You entered  &quot;</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You are allowed as many <em>except</em> statements after the <em>try</em> statement as you wish (much like the <em>elif</em> line for the <em>if</em> statement). This allows you to trap and act on different types of error. A final <em>else</em> statement allows you to ‘clean’ up any errors that you didn’t anticipate!</p>
<p>You might note that the <em>try</em> statement is not limited to checking input. You can include it anywhere in your code where you think an exception might be produced (for example an unwanted divide by zero error).</p>
<p>We won’t cover any more about using exceptions. If you are the only one using the code you might be happy to accept that your programme will crash if it comes across an error or, for example,  you enter text instead of a number. However, if you are expecting your code to be used by many people you will need to address these issues - users get very frustrated if a programme keeps crashing!</p>
</section>
<section id="output-simple-data-to-a-file-from-your-programme">
<h2>10.2 Output simple data to a file from your programme.<a class="headerlink" href="#output-simple-data-to-a-file-from-your-programme" title="Permalink to this headline">#</a></h2>
<p>The Numpy library has some simple statements to conveniently save data in Numpy arrays to a data file. There are two kinds of file that can be produced: text files that are humanly readable and ‘numpy’ files in which the data is stored efficiently but in a way that is not humanly readable (binary files).</p>
<section id="saving-data-as-text-files">
<h3>10.2.1 Saving data as text files.<a class="headerlink" href="#saving-data-as-text-files" title="Permalink to this headline">#</a></h3>
<p>The most convenient and simple way to save data from your program is to use the Numpy <em>savetxt</em> or <em>save</em> statements.</p>
<p>With <em>savetxt</em> you can save a Numpy 1D or 2D array to a named text file. The examples below show how this can be done. Note, it can be convenient to sometimes combine numpy arrays. In the example below the 1D arrays holding the <em>x</em> and <em>y</em> data have been combined into a single multicolumn 2D array with the Numpy <em>column.stack</em> function. These files may conveniently be read into, for example, excel spreadsheets later.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">xy</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
<span class="n">a</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">]])</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s2">&quot;xdata.dat&quot;</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s2">&quot;ydata.dat&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s2">&quot;xydata.dat&quot;</span><span class="p">,</span><span class="n">xy</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s2">&quot;adata.dat&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note that it is a good idea to give your files an extension, in this case, <em>dat</em> that shows that they are text files containing data. You should be able to read these data files by clicking on the filename on the Jupyter server or using any text editor on your computer. You should keep these files as they will be used later to look at reading data from files.  You may wish to look up the Numpy <em>savetext</em> statement as there are additional parameters that can be set if you wish to take more control over the formatting of the data in the file.</p>
</section>
<section id="saving-data-as-archive-binary-files">
<h3>10.2.2 Saving data as archive (binary) files.<a class="headerlink" href="#saving-data-as-archive-binary-files" title="Permalink to this headline">#</a></h3>
<p>A disadvantage of saving data as text files is that the precision in the data saved (especially if you format it to be more readable) may be reduced. An alternative way to save the data is as a binary (archive) file which is encoded in a similar way to the memory in the programme. This is efficient in space and preserves precision, however, the data cannot be read in the same way as a text file. In Numpy, binary data may be saved using the <em>save</em> statement or the <em>savez</em> statement. The latter saves the data in a compressed format and also allows mulitple arrays to be stored in the same file.</p>
<p>The following code shows examples of these statements.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;xdata&quot;</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;ydata&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;adata&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">savez</span><span class="p">(</span><span class="s2">&quot;xdata&quot;</span><span class="p">,</span><span class="n">xvals</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">savez</span><span class="p">(</span><span class="s2">&quot;ydata&quot;</span><span class="p">,</span><span class="n">yvals</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">savez</span><span class="p">(</span><span class="s2">&quot;adata&quot;</span><span class="p">,</span><span class="n">xvals</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">yvals</span><span class="o">=</span><span class="n">y</span><span class="p">,</span><span class="n">xydata</span><span class="o">=</span><span class="n">xy</span><span class="p">,</span><span class="n">avals</span><span class="o">=</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can see that there is a subtle difference between these functions. <em>save</em> only allows a single 1D or 2D array to be saved whereas we can save multiple arrays using <em>savez</em> .  Note that we haven’t included an extension for the filenames in this case. Numpy will assign the defaults extension <em>.npy</em> and <em>.npz</em> for files saved with <em>save</em> and <em>savez</em> respectively. You will find that you cannot open these files on the Jupyter server. If you save them to your computer and open them with the a text editor (e.g. notepad) you will find they contain gobbledegook. Furthermore, if you edit them in a text editor you will corrupt the data. We will see how to read these files shortly.</p>
</section>
</section>
<section id="input-data-from-a-file-into-your-programme">
<h2>10.3 Input data from a file into your programme.<a class="headerlink" href="#input-data-from-a-file-into-your-programme" title="Permalink to this headline">#</a></h2>
<section id="loading-data-stored-as-text">
<h3>10.3.1 loading data stored as text.<a class="headerlink" href="#loading-data-stored-as-text" title="Permalink to this headline">#</a></h3>
<p>The code below shows how you can read the data we wrote to the files <em>xydata.dat</em> and <em>adata.dat</em> back into python arrays. (NB. They do not need to have the same variable name).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;xydata.dat&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">data2</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;adata.dat&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The datafiles do not have to be created using python. Provided the data in the file is ordered as an array it may be read using <em>loadtxt</em> . By default python uses ‘space delimited’ data files. Data from other programmes (for example excel) may be stored in ‘comma delimited’ <em>csv</em> data files (the numbers are separated by commas) or some other delimiter. In this case you will need to specifiy the delimiter used in the data file in your <em>loadtxt</em> function. For example, if you have a <em>csv</em> file named <em>test.csv</em> the appropriate syntax to load the data is to use the keyword ‘delimiter’ i.e.,</p>
<p><em>data=np.loadtxt(“test.csv”,delimiter=’,’)</em></p>
</section>
<section id="loading-data-stored-using-the-numpy-save-function">
<h3>10.3.2 loading data stored using the Numpy <em>save</em> function<a class="headerlink" href="#loading-data-stored-using-the-numpy-save-function" title="Permalink to this headline">#</a></h3>
<p>Numpy provides a function that will read any array data stored in <em>npy</em> files using the <em>save</em> function. The syntax is straightforward. i.e.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xyin</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;xdata.npy&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">xyin</span><span class="p">)</span>
<span class="n">ain</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;adata.npy&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ain</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note you need to include the file extension in the load statement.</p>
</section>
<section id="load-data-stored-using-the-numpy-savez-function">
<h3>10.3.3 load data stored using the Numpy <em>savez</em> function.<a class="headerlink" href="#load-data-stored-using-the-numpy-savez-function" title="Permalink to this headline">#</a></h3>
<p>Reading data from the data stored in <em>npz</em> using the Numpy <em>savez</em> function uses the same Numpy load function. However, Numpy will assume that the data file will contain one or more arrays that may be of different sizes (provided you have used the <em>npz</em> extension). To properly read the file we need to know the names of the arrays stored in the data file. If you created the file and know the names this is fine. However, if you don’t know the names of the arrays you use the <em>keys</em> method to recover the names. i.e.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xdatin</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;xdata.npz&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">xdatin</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">xdatin</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
<span class="n">alldata</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;adata.npz&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">alldata</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">alldata</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</pre></div>
</div>
</div>
</div>
<p>Note that the variables <em>xdatin</em> and <em>alldata</em> are not the original arrays but ‘Npzfile’ objects that contain the data. In our programme, to recover the original arrays as numpy arrays we use e.g. the following syntax.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x2</span> <span class="o">=</span> <span class="n">alldata</span><span class="p">[</span><span class="s1">&#39;xvals&#39;</span><span class="p">]</span>   <span class="c1"># recover the original xvals array to the array x2</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">alldata</span><span class="p">[</span><span class="s1">&#39;yvals&#39;</span><span class="p">]</span>   <span class="c1"># recover the original yvals array to the array x2</span>
<span class="n">xy2</span> <span class="o">=</span><span class="n">alldata</span><span class="p">[</span><span class="s1">&#39;xydata&#39;</span><span class="p">]</span>  <span class="c1"># recover the original xydata array to the array xy2</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">alldata</span><span class="p">[</span><span class="s1">&#39;avals&#39;</span><span class="p">]</span>   <span class="c1"># recover the original avals array to the array a2</span>
<span class="c1">#</span>
<span class="c1">#   Print out some of the arrays to check.</span>
<span class="c1">#</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note, we don’t need to use the original array names.</p>
</section>
</section>
<section id="opening-reading-writing-and-closing-more-general-text-files">
<h2>10.4 Opening, reading, writing and closing more general text files.<a class="headerlink" href="#opening-reading-writing-and-closing-more-general-text-files" title="Permalink to this headline">#</a></h2>
<p>The Numpy functions described above for reading and saving data are very useful and simple to use. However, there are many times when you would like to write and read data to less structured files. For example, keeping a log of progress through your programme (i.e. similar to the print statements you’d use to write to the screen) or reading less structured data from another application.</p>
<section id="writing-arbitrary-data-to-a-file">
<h3>10.4.1 Writing arbitrary data to a file.<a class="headerlink" href="#writing-arbitrary-data-to-a-file" title="Permalink to this headline">#</a></h3>
<p>If you are able to use and format <em>print</em> statements to the screen then writing data to a file is similar. Firstly, you need to create and open a file that you may ‘write’ to. Once you have the file open you use a <em>myfile.write()</em> statement (where <em>myfile</em> is the object you’ve assigned to your file) to write data to the file. At the end make sure that you close the file. If your programme crashes while the file is open you may need to close it manually from the console.</p>
<p><strong>Note</strong>. The write statement allows a lot of flexibility in how the data is output but the argument to it must be a single string. The string needs to contain a placeholder {} at the point in the string at which the variable is to be output. The string should be followed by a ‘.format()’ method that gives the variable for each placeholder. Further formatting in the way the variable is output can be included in the format method but we will not consider it here.</p>
<p>Finally, you should add an ‘\n’ at the end of the string to make sure that the next write statement is on the next line.</p>
<p>The example below should hopefully give you the idea.</p>
<p><strong>Important</strong> If the file already exists then it will be overwritten. If you wish to append data to an existing file then change the “w” to and “a” in the <em>open</em> statement. It is possible to check to see if a file exists before attempting to open a new one using a <em>try</em> … <em>except</em> structure as we used above but this is beyond the scope of this course.</p>
<p>You may wish to inspect the contents of the file ‘test.dat’ that should have been written to the same folder as this notebook. Note it is all in readable text.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">outfile</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test.dat&quot;</span><span class="p">,</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;This is where I&#39;ve put my data</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;sin(pi/3) is </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">3.</span><span class="p">)))</span>
<span class="n">ang</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">4.</span>
<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot; Angle             sin                cos                tan</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ang</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">ang</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">ang</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">ang</span><span class="p">)))</span>
<span class="n">outfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="reading-data-from-an-arbitary-text-file">
<h3>10.4.2 Reading data from an arbitary text file.<a class="headerlink" href="#reading-data-from-an-arbitary-text-file" title="Permalink to this headline">#</a></h3>
<p>Note this will only work for a file that contains ‘normal’ text data (i.e. one you can load and read in text editor). The principle is the reverse of what you do with writing a file. Firstly, the file must exist if you are to read data from it. Also make sure that your file is in the same folder as the python code or that you have specified the full  path fully in the open statement.</p>
<p>Once the file is open you read the data line by line into string variable.</p>
<p>What you do after you have read a line into your programme depends on what is in the data file and what you wish to do with it. Common things you may find, are lines of text that describe the data held in the file. This could be names of datasets, numbers of data points or any other relevant information. If these are not needed in your programme you ignore the line and read in the next line until you find the first line with the data you need. This may be as simple as skipping the first <em>n</em> lines and then reading the data.</p>
<p>Another common form is for the data to be written with ‘comment’ lines using, for example, the # symbol as the first character. In this case, after you have read a line you check to see if the first chracter is a # and if so, you ignore the line and move on.</p>
<p>If you decide the line has valid data then you need to process the string file and convert the data to integer, float etc. variables in your code.</p>
<p>The example below may help you understand the process for the array <em>xydata</em> we saved above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">infile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;xydata.dat&quot;</span><span class="p">)</span>
<span class="n">temp_data</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">dummy</span> <span class="ow">in</span> <span class="n">infile</span><span class="p">:</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">dummy</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="n">temp_data</span> <span class="o">+=</span> <span class="p">[(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="nb">float</span><span class="p">(</span><span class="n">y</span><span class="p">))]</span>
<span class="n">infile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">temp_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="summary">
<h2>10.5 Summary<a class="headerlink" href="#summary" title="Permalink to this headline">#</a></h2>
<p>In this notebook you have learnt about the difference between text and binary (archive) files and you should be able to:</p>
<ul class="simple">
<li><p>write a programme that requests input from the user,</p></li>
<li><p>write a programme that can write Numpy arrays to simple text or binary format files,</p></li>
<li><p>write a programme that can read Numpy arrays that have been saved in files with the Numpy library,</p></li>
<li><p>write a programme the can write data into a text file as strings,</p></li>
<li><p>write a programme that can read arbitrary data from a textfile, line by line into strings for further processing.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="9_theNumpyLibrary.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">9. Introduction to the Numpy library.</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="Boltzmann-description.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">PHYS10008 - extended assignment</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Adrian Barnes and Francesco Turci<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>